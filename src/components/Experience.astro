<section id="experience-section">
  <h2>Experience</h2>
  <article>
    <h3 data-logo="uniga-infotech.png">Front-end Developer (Part-time) at Uniga Infotech</h3>
    <time>Nov 2023 - May 2024 (7 months)</time>
    <ul>
      <li>Developed user interfaces and features using Angular, HTML, TypeScript, SCSS, and Bootstrap.</li>
    </ul>
  </article>
  <article>
    <h3 data-logo="uniga-infotech.png">Front-end Developer (Internship) at Uniga Infotech</h3>
    <time>Apr 2023 - Oct 2023 (7 months)</time>
    <ul>
      <li>Learned the software development process including planning, coding, testing, and fixing bugs.</li>
      <li>Developed user interfaces and features using Angular, HTML, TypeScript, SCSS, and Bootstrap.</li>
    </ul>
  </article>
  <div class="preview">
    <img class="preview-img" src="" alt="Company logo preview" />
  </div>
</section>

<style>
  section {
    position: relative;
  }

  .preview {
    --box-size: 4rem;
    background-color: var(--color-foreground);
    width: var(--box-size);
    height: var(--box-size);
    position: absolute;
    border-radius: 0.5rem;
    pointer-events: none;
    transform: scale(0);
    opacity: 0;
    left: calc(50% - var(--box-size) / 2);
    top: calc(50% - var(--box-size) / 2);
  }

  .preview-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>

<script>
  import gsap from "gsap";

  const dataLogoEls = document.querySelectorAll("[data-logo]")
  const experienceSectionEl = document.getElementById("experience-section")
  
  const previewEl = document.querySelector(".preview");
  dataLogoEls.forEach((el) => {
    const logo = (el as HTMLElement).dataset.logo || '';
    const img: HTMLImageElement | null = document.querySelector(".preview-img");
    
    el.addEventListener("mousemove", (e) => {
      const rect = experienceSectionEl?.getBoundingClientRect()
      if(img && previewEl && experienceSectionEl && rect) {
        img.src = logo;
        gsap.to(previewEl, {
          scale: 1,
          left: (e as MouseEvent).clientX - rect.left + 16,
          top: (e as MouseEvent).clientY - rect.top + 16,
          opacity: 1
        })
      }
    })

    el.addEventListener("mouseout", (e) => {
      if(img && previewEl) {
        img.src = logo;
        gsap.to(previewEl, {
          scale: 0,
          opacity: 0
        })
      }
    })
  })
</script>